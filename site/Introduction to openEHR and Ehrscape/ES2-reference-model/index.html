



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.6.0">
    
    
      
        <title>"openEHR Reference Model" permalink: ES2-reference-model.html</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.1b62728e.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#009688">
      
    
    
      <script src="../../assets/javascripts/modernizr.268332fc.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="teal" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#key-openehr-datatypes" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="openEHR client-side development" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              openEHR client-side development
            </span>
            <span class="md-header-nav__topic">
              
                "openEHR Reference Model" permalink: ES2-reference-model.html
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="openEHR client-side development" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    openEHR client-side development
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="What can I do with the platform?" class="md-nav__link">
      What can I do with the platform?
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../404/" title=""Page Not Found"" class="md-nav__link">
      "Page Not Found"
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Clinical Content
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Clinical Content
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Clinical Content/CC0-CKM-overview/" title=""CKM overview" permalink: CC0-CKM-overview.html summary: This" class="md-nav__link">
      "CKM overview" permalink: CC0-CKM-overview.html summary: This
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Clinical Content/CC1-CKM-signup/" title=""CKM signup" permalink: CC1-CKM-signup.html summary: This section" class="md-nav__link">
      "CKM signup" permalink: CC1-CKM-signup.html summary: This section
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Clinical Content/CC2-CKM-template-review/" title=""CKM template review" permalink: CC2-CKM-template-review.html" class="md-nav__link">
      "CKM template review" permalink: CC2-CKM-template-review.html
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      EHR Explorer
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        EHR Explorer
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../EHR Explorer/EHREX1-intro/" title="Introduction to EHR Explorer" class="md-nav__link">
      Introduction to EHR Explorer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../EHR Explorer/EHREX2-navigation/" title="Home page and navigation" class="md-nav__link">
      Home page and navigation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../EHR Explorer/EHREX3-models/" title=""Models"" class="md-nav__link">
      "Models"
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../EHR Explorer/EHREX4-form-builder/" title=""Form Builder" permalink: EHREX4-form-builder.html summary: This" class="md-nav__link">
      "Form Builder" permalink: EHREX4-form-builder.html summary: This
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Implementation guidance
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Implementation guidance
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Implementation guidance/IMP1-lab-test-imp-guide/" title="Lab test implementation guidance" class="md-nav__link">
      Lab test implementation guidance
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" checked>
    
    <label class="md-nav__link" for="nav-6">
      Introduction to openEHR and Ehrscape
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Introduction to openEHR and Ehrscape
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../ES0-overview-openehr-ehrscape/" title=""Overview of openEHR and Ehrscape" permalink:" class="md-nav__link">
      "Overview of openEHR and Ehrscape" permalink:
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ES1-archetypes-template/" title=""openEHR Archetypes and Templates" permalink:" class="md-nav__link">
      "openEHR Archetypes and Templates" permalink:
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        "openEHR Reference Model" permalink: ES2-reference-model.html
      </label>
    
    <a href="./" title=""openEHR Reference Model" permalink: ES2-reference-model.html" class="md-nav__link md-nav__link--active">
      "openEHR Reference Model" permalink: ES2-reference-model.html
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#datatype-text" class="md-nav__link">
    Datatype: text
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#datatype-codedtext" class="md-nav__link">
    Datatype: codedText
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#external-terminology-eg-snomed-ct" class="md-nav__link">
    External terminology e.g SNOMED CT
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#local-atcode-eg-at0007" class="md-nav__link">
    Local 'atCode' e.g at0007
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#datatype-ordinal" class="md-nav__link">
    Datatype: ordinal
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#datatype-count" class="md-nav__link">
    Datatype: count
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#datatype-datetime" class="md-nav__link">
    Datatype: datetime
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#datatype-quantity" class="md-nav__link">
    Datatype: quantity
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Platforms Basics
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Platforms Basics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Platforms Basics/BASIC3-list-of-services/" title="List of available services" class="md-nav__link">
      List of available services
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Postman
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Postman
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Postman/PM1-postman-ehrscape-getting-ready/" title="Getting ready with Postman" class="md-nav__link">
      Getting ready with Postman
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Postman/PM2-navigate-postman/" title="Navigate Postman" class="md-nav__link">
      Navigate Postman
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Postman/PM3-using-postman/" title="Using Postman with Ehrscape" class="md-nav__link">
      Using Postman with Ehrscape
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      openEHR Tools
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        openEHR Tools
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../openEHR Tools/openEHR0-introduction-and-setup/" title=""Introduction and setup" permalink:" class="md-nav__link">
      "Introduction and setup" permalink:
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../openEHR Tools/openEHR1-archetype-editor/" title=""Archetype Editor" permalink: openEHR1-archetype-editor.html" class="md-nav__link">
      "Archetype Editor" permalink: openEHR1-archetype-editor.html
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../openEHR Tools/openEHR2-template-designer/" title=""Template Designer" permalink: openEHR2-template-designer.html" class="md-nav__link">
      "Template Designer" permalink: openEHR2-template-designer.html
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../openEHR Tools/openEHR3-resources/" title=""Resources" permalink: openEHR3-resources.html summary: This" class="md-nav__link">
      "Resources" permalink: openEHR3-resources.html summary: This
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#datatype-text" class="md-nav__link">
    Datatype: text
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#datatype-codedtext" class="md-nav__link">
    Datatype: codedText
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#external-terminology-eg-snomed-ct" class="md-nav__link">
    External terminology e.g SNOMED CT
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#local-atcode-eg-at0007" class="md-nav__link">
    Local 'atCode' e.g at0007
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#datatype-ordinal" class="md-nav__link">
    Datatype: ordinal
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#datatype-count" class="md-nav__link">
    Datatype: count
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#datatype-datetime" class="md-nav__link">
    Datatype: datetime
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#datatype-quantity" class="md-nav__link">
    Datatype: quantity
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <p>model ---</p>
<p>The openEHR Reference model defines a relatively small set of
information model constructs which openEHR back-ends must support. This
includes a number of generic classes and datatypes.</p>
<p>The Reference model contains virtually no clinical content e.g concepts
for Medication, or Diagnosis. These are defined and managed separately
as <code class="codehilite"><span class="err">archetypes</span></code></p>
<h1 id="key-openehr-datatypes">Key openEHR datatypes</h1>
<p>openEHR has a very rich set of allowable datatypes. A full definition is
beyond the scope of this document but developers new to this field may
find the following notes helpful.</p>
<h2 id="datatype-text">Datatype: <em>text</em></h2>
<p>Allows the recording of simple, unformatted text. openEHR does not
normally constrain the length of string.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="err">asthma_diary_entry/history:0/story_history/comment: Feeling much better,</span>
</pre></div>
</td></tr></table>

<h2 id="datatype-codedtext">Datatype: <em>codedText</em></h2>
<p>Is a commonly used datatype in openEHR systems and is a sub-class of
text. i.e where-ever <em>text</em> is specified <em>codedText</em> can be used
instead.</p>
<p>Codes may be 'external' e.g. SNOMED CT or 'local', where they are
defined within archetypes, have the form 'atxxxxx' and are commonly
referred to as <strong>'atCodes'</strong></p>
<p>A codedText element always includes the terminologyID, the code itself
and the text of the coded concept (Rubric). Where a codedText item is
required, allowed value(s) are expressed in the form:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">terminologyId</span><span class="p">::</span><span class="n">code</span><span class="p">::</span><span class="n">rubric</span>

<span class="k">local</span><span class="p">::</span><span class="n">at0007</span><span class="p">::</span><span class="n">Dental</span> <span class="n">swelling</span>
<span class="n">SNOMED</span><span class="o">-</span><span class="n">CT</span><span class="p">::</span><span class="mi">123456</span><span class="p">::</span><span class="k">No</span> <span class="n">pathology</span> <span class="k">found</span>
</pre></div>
</td></tr></table>

<p>When a codedText item is added to a FLAT JSON format document, you must
give the code, value and terminology, unless this is a local (atCode)
code, in which case only the code needs to be provided.</p>
<h3 id="external-terminology-eg-snomed-ct">External terminology e.g SNOMED CT</h3>
<p>Code, terminology and value must be specified</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="err">&#39;asthma_diary_entry/history:0/story_history/symptom:0/symptom_name|code&#39;: &#39;23924001&#39;,</span>
<span class="err">&#39;asthma_diary_entry/history:0/story_history/symptom:0/symptom_name|value&#39;: &#39;chest tightness&#39;,</span>
<span class="err">&#39;asthma_diary_entry/history:0/story_history/symptom:0/symptom_name|terminology&#39;: &#39;SNOMED-CT&#39;,</span>
</pre></div>
</td></tr></table>

<h3 id="local-atcode-eg-at0007">Local 'atCode' e.g at0007</h3>
<p>Only the code needs to be specified - the value and terminology are not
required since they are pre-defined in the openEHR template..</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="err">&#39;asthma_diary_entry/examination_findings:0/pulmonary_function_testing:0/result_details/pulmonary_flow_rate_result/test_result_name|code&#39;: &#39;at0071&#39;</span>
</pre></div>
</td></tr></table>

<h2 id="datatype-ordinal">Datatype: <em>ordinal</em></h2>
<p>Combines codedText with a score, expressed as an integer.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="mi">0</span><span class="o">:</span> <span class="n">Green</span>  <span class="err">`</span><span class="n">local</span><span class="o">::</span><span class="n">at0022</span><span class="o">::</span><span class="n">Green</span><span class="err">`</span>
<span class="mi">1</span><span class="o">:</span> <span class="n">Amber</span>  <span class="err">`</span><span class="n">local</span><span class="o">::</span><span class="n">at0023</span><span class="o">::</span><span class="n">Amber</span><span class="err">`</span>
<span class="mi">2</span><span class="o">:</span> <span class="n">Red</span>    <span class="err">`</span><span class="n">local</span><span class="o">::</span><span class="n">at0024</span><span class="o">::</span><span class="n">Red</span><span class="err">`</span>

<span class="s1">&#39;community_dental_final_assessment_letter/assessment_scales/dental_rag_score:0/caries_tooth_decay/caries_risk|code&#39;</span><span class="o">:</span> <span class="s1">&#39;at0024&#39;</span><span class="o">,</span>
<span class="s1">&#39;community_dental_final_assessment_letter/assessment_scales/dental_rag_score:0/caries_tooth_decay/caries_risk|ordinal&#39;</span><span class="o">:</span> <span class="mi">2</span><span class="o">,</span>
<span class="s1">&#39;community_dental_final_assessment_letter/assessment_scales/dental_rag_score:0/caries_tooth_decay/caries_risk|value&#39;</span><span class="o">:</span> <span class="s1">&#39;Red&#39;</span><span class="o">,</span>
</pre></div>
</td></tr></table>

<h2 id="datatype-count">Datatype: <em>count</em></h2>
<p><strong><em>count</em></strong> is a simple integer.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="err">&#39;community_dental_final_assessment_letter/investigations_and_results:0/imaging_examination_result:0/result_group/decayed_teeth/decayed_teeth&#39;: 4,</span>
</pre></div>
</td></tr></table>

<h2 id="datatype-datetime">Datatype: <em>datetime</em></h2>
<p>Records a date or date and time using the <a href="http://www.w3.org/TR/NOTE-datetime">ISO8061
format</a>.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="err">&#39;ctx/time&#39;: &#39;2014-09-23T00:11:02.518+02:00&#39;</span>
</pre></div>
</td></tr></table>

<h2 id="datatype-quantity">Datatype: <em>quantity</em></h2>
<p>Records a physical quantity along with the appropriate SI units, which
should normally be compliant with <a href="http://unitsofmeasure.org">UCUM</a>.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="err">&quot;asthma_diary_entry/examination_findings:0/pulmonary_function_testing:0/result_details/pulmonary_flow_rate_result/actual_result|magnitude&quot;: 550,</span>
<span class="err">&quot;asthma_diary_entry/examination_findings:0/pulmonary_function_testing:0/result_details/pulmonary_flow_rate_result/actual_result|unit&quot;: &quot;l/min&quot;,</span>
</pre></div>
</td></tr></table>

<h1 id="key-openehr-concepts-and-classes">Key openEHR concepts and classes</h1>
<h2 id="external-identifiers">External identifiers</h2>
<p>The subjectId (sometimes called externalId) is a patient identifier by
which the patient is known outwith the openEHR system e.g. a hospital
identifier or NHS number.</p>
<h2 id="ehr">EHR</h2>
<p>In an openEHR system, each patient has an <code class="codehilite"><span class="err">ehr</span></code> (a per-patient
electronic health record) with a unique <code class="codehilite"><span class="err">ehrId</span></code> identifier (usually a
guid). All references to openEHR patient data are via this ehrId. An API
call <code class="codehilite"><span class="err">GET ehr/</span></code> is used to reference the ehrId from the provided
subjectId/externalId.</p>
<p>Example ehrId: <code class="codehilite"><span class="err">8fa77360-683c-4989-be5e-89a192624b43</span></code></p>
<p>Other subsequent calls to the openEHR system for that particular patient
are via the ehrId.</p>
<h2 id="composition">COMPOSITION</h2>
<p>All openEHR data is committed inside a <code class="codehilite"><span class="err">composition</span></code>, a document-level
container which is given a unique <code class="codehilite"><span class="err">compositionId</span></code>. If the composition is
subsequently updated the root compositionId remain unchanged but its
version number is incremented. All previous composition versions are
retained for audit/legal purposes.</p>
<p>Initial version<br />
<code class="codehilite"><span class="c">2cf04d6c-31e8-4599-a14b-9a0add4de5d9::fivium.ehrscape.com::1</span></code></p>
<p>Revised version<br />
<code class="codehilite"><span class="c">2cf04d6c-31e8-4599-a14b-9a0add4de5d9::fivium.ehrscape.com::2</span></code></p>
<p>If you need to retrieve a composition, it is normally ok to simply use
the root part <code class="codehilite"><span class="err">2cf04d6c-31e8-4599-a14b-9a0add4de5d9</span></code> which will return
the latest revision in the current repository.</p>
<h2 id="openehr-composition-file-formats">openEHR Composition file formats</h2>
<p>In general, committing or retrieving a composition to/from an openEHR
system involves sending or receiving a structured XML or JSON file via a
simple API.</p>
<p>The current standard <strong>'canonical XML'</strong> openEHR Composition format is
defined by a set of <a href="https://github.com/openEHR/specifications/tree/master/ITS/XML-schema">standard
schema</a>.</p>
<p>More recently, openEHR implementers have started to develop alternative
custom JSON formats (usuually with converters to/from the canonical XML
format).</p>
<p>The <a href="https://www.ehrscape.com/api-explorer.html">Operon Ehrscape API</a>,
developed by Marand, provides a simple restful API which hides much of
the complexity of the underlying openEHR server accepting simpler,
flatter forms of composition data, using defaults within the template
schema to correctly populate the raw openEHR data which is stored
internally.</p>
<p>The <code class="codehilite"><span class="err">FLAT JSON</span></code> format is just a set of simple name/value pairs where
the 'name' carries the path to each element. You do not need to parse
this path. You should normally use this <strong>FLAT JSON</strong> format, which is
easier for new openEHR users. e.g.</p>
<ul>
<li>
<p>FLAT JSON format<br />
<code class="codehilite"><span class="err">&quot;community_dental_final_assessment_letter/assessment_scales/dental_rag_score:0/caries_tooth_decay/clinical_factors|code&quot;:</span><span class="err">    &quot;at0025&quot;, …</span></code></p>
</li>
<li>
<p>STRUCTURED JSON format</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="err">…</span>
<span class="err">&quot;clinical_factors&quot;: [</span>
<span class="err"> {</span>
<span class="err"> &quot;|code&quot;: &quot;at0025&quot;,</span>
<span class="err"> &quot;|terminology&quot;: &quot;local&quot;,</span>
<span class="err"> &quot;|value&quot;: &quot;Teeth with carious lesions&quot;</span>
<span class="err"> }</span>
<span class="err"> ]</span>
<span class="err">…</span>
</pre></div>
</td></tr></table>

</li>
<li>
<p>RAW XML format</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>…
<span class="nt">&lt;ns2:value</span> <span class="na">xsi:type=</span><span class="s">&quot;ns2:DV_CODED_TEXT&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;ns2:value</span><span class="err">&lt;Teeth</span> <span class="err">with</span> <span class="err">carious</span> <span class="err">lesions&lt;/ns2:value</span><span class="nt">&gt;</span>
<span class="nt">&lt;ns2:defining_code&gt;</span>
<span class="nt">&lt;ns2:terminology_id&gt;</span>
<span class="nt">&lt;ns2:value</span><span class="err">&lt;local&lt;/ns2:value</span><span class="nt">&gt;</span>
<span class="nt">&lt;/ns2:terminology_id&gt;</span>
<span class="nt">&lt;ns2:code_string</span><span class="err">&lt;at0025&lt;/ns2:code_string</span><span class="nt">&gt;</span>
<span class="nt">&lt;/ns2:defining_code&gt;</span>
<span class="nt">&lt;/ns2:value&gt;</span>
<span class="nt">&lt;/ns2:value&gt;</span> …
</pre></div>
</td></tr></table>

</li>
</ul>
<h1 id="key-openehr-reference-model-attributes">Key openEHR Reference model attributes</h1>
<p>A number of key data points need to be populated in an openEHR
composition, which may not be apparent from the archetypes or templates.
Developers can largely use the example instance documents and APIs for
guidance but these notes may give useful background in addition to
viewing the <a href="http://www.openehr.org/local/releases/1.0.1/uml/index.html">UML view of the openEHR reference
model.</a></p>
<h2 id="committer"><em>committer</em></h2>
<p>This is the name of the person physically committing the document ie.
the person logged on to the account. If omitted from API calls, Ehrscape
will use the domain login name.</p>
<h2 id="compositioncomposer"><em>composition/composer</em></h2>
<p>This is the clinical author of the document i.e the person with clinical
responsibility. Ehrscape FLAT and STRCTURTED formats handle this as
<code class="codehilite"><span class="err">composer_name</span></code>.</p>
<h2 id="compositioncontextstart95time"><em>composition/context/start_time</em></h2>
<p>This is the time that the clinical interaction with the patient began.
Ehrscape FLAT and STRUCTURED formats handle this as ctx/time.</p>
<h2 id="compositioncontexthealth95care95facility"><em>composition/context/health_care_facility</em></h2>
<p>This is the healthcare facility / oragnisation under who’s remit the
encounter took place.</p>
<h2 id="observationtime"><em>observation/time</em></h2>
<p>This is the time that a patient’s signs and symptoms were observed or a
test was run. It is set automatically by the value of the ctx/time
attribute. If you need to set the time of a specific observation you can
use</p>
<p>The Ehrscape FLAT and STRUCTURED formats hide much of the complexity of
these attributes, providing sensible defaults. In particular the <code class="codehilite"><span class="err">ctx</span></code>
header common to both JSON STRUCTURED and FLAT formats, considerably
simplifies the composition header …</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="err">&#39;ctx/composer_name&#39;: &#39;Rebecca Wassall&#39;,</span>
<span class="err">&#39;ctx/health_care_facility|id&#39;: &#39;999999-345&#39;,</span>
<span class="err">&#39;ctx/health_care_facility|name&#39;: &#39;Northumbria Community NHS&#39;,</span>
<span class="err">&#39;ctx/id_namespace&#39;: &#39;NHS-UK&#39;,</span>
<span class="err">&#39;ctx/id_scheme&#39;: &#39;2.16.840.1.113883.2.1.4.3&#39;,</span>
<span class="err">&#39;ctx/language&#39;: &#39;en&#39;,</span>
<span class="err">&#39;ctx/territory&#39;: &#39;GB&#39;,</span>
<span class="err">&#39;ctx/time&#39;: &#39;2014-09-23T00:11:02.518+02:00&#39;,</span>
</pre></div>
</td></tr></table>

<h1 id="handling-specific-openehr-datatypes">Handling specific openEHR datatypes</h1>
<h2 id="text"><em>text</em></h2>
<p>Text handling is normally straightforward.</p>
<p>FLAT + STRUCTURED</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="err">&quot;synopsis&quot;: [</span>
<span class="err"> &quot;Significant dental issues.&quot;</span>
<span class="err"> ]</span>
</pre></div>
</td></tr></table>

<h2 id="codedtext"><em>codedText</em></h2>
<p>For an external terminology, the terminologyId, code and text value must
be supplied but in JSON FLAT and STRUCTURED formats only the local
'atcode' needs to be supplied.</p>
<p>STRUCTURED JSON format</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span> <span class="n">Internal</span> <span class="p">(</span><span class="k">local</span><span class="p">)</span> <span class="n">code</span><span class="p">:</span>
 <span class="ss">&quot;dental_swelling&quot;</span><span class="p">:</span> <span class="p">[</span>
 <span class="err">{</span>
 <span class="ss">&quot;|code&quot;</span><span class="p">:</span> <span class="ss">&quot;at0006&quot;</span><span class="p">,</span>
 <span class="err">}</span>
 <span class="p">]</span>

 <span class="k">External</span> <span class="n">terminology</span><span class="p">:</span>
 <span class="ss">&quot;symptom_name&quot;</span><span class="p">:</span> <span class="p">[</span>
 <span class="err">{</span>
 <span class="ss">&quot;|code&quot;</span><span class="p">:</span> <span class="ss">&quot;102616008&quot;</span><span class="p">,</span>
 <span class="ss">&quot;|terminology&quot;</span><span class="p">:</span> <span class="ss">&quot;SNOMED-CT&quot;</span><span class="p">,</span>
 <span class="ss">&quot;|value&quot;</span><span class="p">:</span> <span class="ss">&quot;Painful mouth&quot;</span>
 <span class="err">}</span>
 <span class="p">]</span>
</pre></div>
</td></tr></table>

<p>FLAT JSON format</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span> <span class="n">Internal</span> <span class="p">(</span><span class="k">local</span><span class="p">)</span> <span class="n">code</span><span class="p">:</span>
 <span class="ss">&quot;community_dental_final_assessment_letter/examination_findings:0/physical_examination_findings:0/oral_examination/dental_swelling|code&quot;</span><span class="p">:</span> <span class="ss">&quot;at0006&quot;</span>

 <span class="k">External</span> <span class="n">terminology</span><span class="p">:</span>
 <span class="ss">&quot;community_dental_final_assessment_letter/history:0/story_history:0/symptom:0/symptom_name|value&quot;</span><span class="p">:</span> <span class="ss">&quot;Painful mouth&quot;</span><span class="p">,</span>
 <span class="ss">&quot;community_dental_final_assessment_letter/history:0/story_history:0/symptom:0/symptom_name|code&quot;</span><span class="p">:</span> <span class="ss">&quot;102616008&quot;</span><span class="p">,</span>
 <span class="ss">&quot;community_dental_final_assessment_letter/history:0/story_history:0/symptom:0/symptom_name|terminology&quot;</span><span class="p">:</span> <span class="ss">&quot;SNOMED-CT&quot;</span>
</pre></div>
</td></tr></table>

<h2 id="ordinal"><em>ordinal</em></h2>
<p>For JSON FLAT and STRUCTURED formats only the local 'atcode' needs to be
supplied although the ordinal and text value cacomplete are also
accpeted FLAT JSON format</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="err">&quot;community_dental_final_assessment_letter/assessment_scales/dental_rag_score:0/caries_tooth_decay/caries_risk|code&quot;: &quot;at0024&quot;</span>
</pre></div>
</td></tr></table>

<p>STRUCTURED format</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="err"> &quot;caries_risk&quot;: [</span>
<span class="err"> {</span>
<span class="err"> &quot;|code&quot;: &quot;at0024&quot;,</span>
<span class="err"> }</span>
<span class="err"> ]</span>
</pre></div>
</td></tr></table>

<p>or</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="err"> &quot;caries_risk&quot;: [</span>
<span class="err"> {</span>
<span class="err"> &quot;|code&quot;: &quot;at0024&quot;,</span>
<span class="err"> &quot;|ordinal&quot;: 2,</span>
<span class="err"> &quot;|value&quot;: &quot;Red&quot;</span>
<span class="err"> }</span>
<span class="err"> ]</span>
</pre></div>
</td></tr></table>

<h2 id="date"><em>date</em></h2>
<p>Dates need to be persisted in the <a href="http://www.w3.org/TR/NOTE-datetime">ISO8061
format.</a> and should be displayed in
CUI format e.g. 12-Nov-1958</p>
<h1 id="tricky-issues">Tricky issues</h1>
<h2 id="converting-ui-checkboxes-tofrom-codedtext">Converting UI checkboxes to/from codedText</h2>
<p>In a number of places, the UI may best be represented as a set of
checkboxes, while the underlying data is modelled as codedText.</p>
<p>e.g. Symptoms</p>
<p>While it may seem more easier and more logical to use a boolean
datatype, this is a common pattern in openEHR datasets which are
designed to be interoperable and extensible. Experience has shown that
exapnsion of the target valueset and alignment to external terminologies
is easier if an enumerated list of codedText is used rather than
boolean.</p>
<p>In the case of 'Symptom' the rule is …</p>
<ul>
<li>
<p>If the checkbox is ticked, populate the Symptom name with the
    SNOMED-CT term</p>
</li>
<li>
<p>If the checkbox is unticked, omit the Symptom name element
    completely.</p>
</li>
</ul>
<p>Conversely when loading a persisted dataset, the checkbox should only be
checked if the Symptom name element is present and contains SNOMED-CT
term 102616008.</p>
<h2 id="multiple-occurrence-data">Multiple occurrence data</h2>
<p>Some aspects of the form e.g Symptoms are handled as multiple
occurrences of the same data point in the underlying dataset.</p>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../ES1-archetypes-template/" title=""openEHR Archetypes and Templates" permalink:" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                "openEHR Archetypes and Templates" permalink:
              </span>
            </div>
          </a>
        
        
          <a href="../../Platforms Basics/BASIC3-list-of-services/" title="List of available services" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                List of available services
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.808e90bb.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>